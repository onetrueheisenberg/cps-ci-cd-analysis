FROM debian:stable

LABEL org.opencontainers.image.authors="stefan.tatschner@aisec.fraunhofer.de"

RUN DEBIAN_FRONTEND=noninteractive apt-get update && apt-get install --no-install-recommends -y pipx && rm -rf /var/lib/apt/lists/*

WORKDIR /app/gallia
COPY . .

ENV PATH="/root/.local/bin:$PATH"
RUN ["pipx", "install", "uv"]
RUN ["uv", "sync"]

ENTRYPOINT [ "uv", "run", "gallia" ]